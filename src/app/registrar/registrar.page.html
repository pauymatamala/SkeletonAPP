<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Crear usuario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Crear usuario</ion-title>
    </ion-toolbar>
  </ion-header>
  <div class="ion-padding">
    <p>Nuevo usuario</p>

    <form [formGroup]="registerForm" (ngSubmit)="saveTemp()">
    <ion-list>
      <!--Nombre completo-->
      <ion-item>
        <ion-input
          label="Nombre completo"
          labelPlacement="stacked"
          [clearOnEdit]="true"
          placeholder="Ingrese su nombre completo"
          formControlName="nombre"
        >
        </ion-input>
      </ion-item>
      <ion-note color="danger" *ngIf="registerForm.get('nombre')?.invalid && (registerForm.get('nombre')?.touched || registerForm.get('nombre')?.dirty)">
        El nombre es requerido (mínimo 3 caracteres).
      </ion-note>
      <!--username-->
      <ion-item>
        <ion-input
          label="username"
          labelPlacement="stacked"
          [clearOnEdit]="true"
          placeholder="ingrese su nombre de usuario"
          formControlName="username"
        >
        </ion-input>
      </ion-item>
      <ion-note color="danger" *ngIf="registerForm.get('username')?.invalid && (registerForm.get('username')?.touched || registerForm.get('username')?.dirty)">
        El usuario es requerido (mínimo 3 caracteres).
      </ion-note>
      <!--Email-->
        <ion-item>
          <ion-input labelPlacement="stacked" label="Email" placeholder="email@domain.com" type="email" formControlName="email">
            <ion-icon slot="start" name="mail" aria-hidden="true"></ion-icon>
          </ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)">
          Ingrese un correo válido.
        </ion-note>
      <!--Contraseña-->
        <ion-item>
          <ion-input labelPlacement="stacked" label="Contraseña" placeholder="Ingrese su contraseña" type="password" formControlName="password">
            <ion-icon slot="start" name="lock-closed" aria-hidden="true"></ion-icon>
          </ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.touched || registerForm.get('password')?.dirty)">
          La contraseña es requerida (mínimo 6 caracteres).
        </ion-note>
      <!--Confirmar contraseña-->
        <ion-item>
          <ion-input labelPlacement="stacked" label="Confirmar contraseña" placeholder="Confirme su contraseña" type="password" formControlName="confirm">
            <ion-icon slot="start" name="lock-closed" aria-hidden="true"></ion-icon>
          </ion-input>
        </ion-item>
        <ion-note color="danger" *ngIf="registerForm.hasError('passwordsMismatch') && (registerForm.get('confirm')?.touched || registerForm.get('confirm')?.dirty)">
          Las contraseñas no coinciden.
        </ion-note>
      <!--Fecha de nacimiento-->
        <ion-item>
          <ion-label>Fecha de nacimiento</ion-label>
            <!--icono de calendario-->
            <ion-button (click)="presentPopover($event)">
              <ion-icon name="calendar-outline"></ion-icon>
            </ion-button>
                <!--Popover calendario-->
                <ion-popover #popover [isOpen]="isOpen" (didDismiss)="isOpen = false">
                  <ng-template>
                    <ion-content class="ion-padding">
                      <ion-datetime presentation="date" (ionChange)="onDateSelect($event)"></ion-datetime>
                    </ion-content>
                  </ng-template>
                </ion-popover>
                <ion-note slot="end" *ngIf="nacimiento">{{ nacimiento | date:'dd/MM/yyyy' }}</ion-note>

        </ion-item>

    </ion-list>
    <div class="ion-padding">
      <ion-button expand="block" type="submit" [disabled]="registerForm.invalid">Registrar</ion-button>
      <ion-button expand="block" color="medium" type="button" (click)="goToLogin()">Volver</ion-button>
      <ion-button expand="block" color="light" type="button" (click)="registerForm.reset()">Limpiar</ion-button>
    </div>
    </form>

  </div>

</ion-content>

